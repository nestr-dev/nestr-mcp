<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nestr MCP - AI for Holacracy, Sociocracy & Self-Organizing Teams</title>
  <meta name="description" content="Connect AI to Nestr for Holacracy and Sociocracy teams. Manage circles, roles, governance meetings, tensions, and accountabilities with Claude, ChatGPT, Gemini, and more via MCP.">
  <meta name="keywords" content="Holacracy, Sociocracy, MCP, Model Context Protocol, AI, self-organization, self-management, circles, roles, governance, tactical meetings, tensions, teal organization, distributed authority">
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" href="https://app.nestr.io/favicon.ico">
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "Nestr MCP Server",
    "applicationCategory": "BusinessApplication",
    "operatingSystem": "Any",
    "description": "Connect AI assistants to Nestr for Holacracy, Sociocracy, and self-organizing teams. Manage circles, roles, governance meetings, tensions, and accountabilities through natural language.",
    "url": "https://mcp.nestr.io",
    "author": {
      "@type": "Organization",
      "name": "Nestr",
      "url": "https://nestr.io"
    },
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    },
    "keywords": "Holacracy, Sociocracy, MCP, Model Context Protocol, AI, self-organization, self-management, circles, roles, governance meetings, tactical meetings, tensions"
  }
  </script>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "What is Nestr MCP?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Nestr MCP is a Model Context Protocol server that connects AI assistants like Claude, ChatGPT, and Gemini to your Nestr workspace. It allows you to manage your Holacracy or Sociocracy organization through natural language conversations."
        }
      },
      {
        "@type": "Question",
        "name": "What is Holacracy?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Holacracy is a self-management practice for organizations that distributes authority through a system of circles and roles, with governance and tactical meetings to evolve the structure and get work done."
        }
      },
      {
        "@type": "Question",
        "name": "What AI assistants work with Nestr MCP?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Nestr MCP works with Claude (web and desktop), ChatGPT, Google Gemini, GitHub Copilot, Cursor, Claude Code, and any other AI tool that supports the Model Context Protocol (MCP)."
        }
      }
    ]
  }
  </script>
</head>
<body>
  <header>
    <div class="container">
      <div class="logo">
        <img src="logo.png" alt="Nestr" width="32" height="32">
        <span>Nestr MCP</span>
      </div>
      <nav>
        <a href="https://app.nestr.io" target="_blank">Open Nestr</a>
        <a href="https://help.nestr.io" target="_blank">Help</a>
        <a href="https://github.com/nestr-dev/nestr-mcp" target="_blank">GitHub</a>
      </nav>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="container">
        <h1>AI for Holacracy, Sociocracy & Self-Organizing Teams</h1>
        <p class="subtitle">
          Connect Claude, ChatGPT, Gemini, and other AI assistants to <a href="https://nestr.io" target="_blank">Nestr</a> &mdash;
          the platform for self-organizing teams. Manage circles, roles, governance proposals,
          tactical meetings, and tensions through natural conversation.
        </p>
        <div class="cta-buttons">
          <a href="#setup" class="btn primary">Get Started</a>
          <a href="#examples" class="btn secondary">See Examples</a>
        </div>
      </div>
    </section>

    <section class="about">
      <div class="container">
        <div class="about-box">
          <h2>What is Nestr?</h2>
          <p class="about-text">
            <a href="https://nestr.io" target="_blank">Nestr</a> is the platform for teams practicing
            <strong>Holacracy</strong>, <strong>Sociocracy</strong>, and other forms of <strong>self-organization</strong>.
            It helps you manage your organizational structure with circles and roles, run governance and tactical meetings,
            track tensions, and distribute authority across your team.
          </p>
          <p class="about-text">
            The <strong>Nestr MCP Server</strong> brings AI into your self-management practice &mdash;
            and your self-organization practice into your favorite AI chatbot.
            Query your organizational structure, capture tensions, prepare for governance and tactical meetings,
            and manage projects, all through natural conversation.
          </p>
        </div>
      </div>
    </section>

    <section class="features">
      <div class="container">
        <h2>What Can You Do?</h2>
        <div class="feature-grid">
          <div class="feature">
            <div class="feature-icon">&#9881;</div>
            <h3>Structure</h3>
            <p>Navigate your governance structure: circles, roles, accountabilities, domains, and policies. Understand who is accountable for what.</p>
          </div>
          <div class="feature">
            <div class="feature-icon">&#127919;</div>
            <h3>Work</h3>
            <p>Manage projects, actions, and tensions within your roles. Track what needs to get done, capture gaps between current and ideal reality, and move work forward.</p>
          </div>
          <div class="feature">
            <div class="feature-icon">&#128172;</div>
            <h3>Communicate</h3>
            <p>Add updates, comments, and context to any item. Prepare for tactical and governance meetings, and keep your circle informed on progress and blockers.</p>
          </div>
          <div class="feature">
            <div class="feature-icon">&#128202;</div>
            <h3>Insights</h3>
            <p>Monitor the health of your self-organizing practice. Track metrics, review activity patterns, and identify where your organization may need attention.</p>
          </div>
        </div>
      </div>
    </section>

    <section id="setup" class="setup">
      <div class="container">
        <h2>Setup Guide</h2>

        <div class="step" id="step-1">
          <div class="step-number">1</div>
          <div class="step-content">
            <h3>Choose Your Authentication Method</h3>

            <div class="auth-options">
              <button class="auth-option active" data-auth="oauth">
                <div class="option-header">
                  <h4>OAuth</h4>
                  <span class="option-badge">Recommended</span>
                </div>
                <p>Respects your user-specific permissions. You'll only access nests you have permission to.</p>
                <ul class="option-pros">
                  <li>Per-user permissions</li>
                  <li>Secure token-based auth</li>
                  <li>MCP clients auto-discover endpoints</li>
                </ul>
              </button>

              <button class="auth-option" data-auth="apikey">
                <div class="option-header">
                  <h4>API Key</h4>
                </div>
                <p>Full workspace access, useful for automation or when OAuth isn't supported.</p>
                <ul class="option-pros">
                  <li>Simple to set up</li>
                  <li>Works everywhere</li>
                  <li>Good for automation</li>
                </ul>
              </button>
            </div>

            <div class="auth-details">
              <div class="auth-detail active" id="auth-detail-oauth"></div>

              <div class="auth-detail" id="auth-detail-apikey">
                <p>To get an API key:</p>
                <ol>
                  <li>Go to your <a href="https://app.nestr.io" target="_blank">Nestr workspace</a></li>
                  <li>Click the <strong>Settings</strong> icon (gear) in the top right</li>
                  <li>Navigate to the <strong>Integrations</strong> tab</li>
                  <li>Find <strong>"Workspace API access"</strong> and click <strong>Configure</strong></li>
                  <li>Click <strong>"New API key"</strong> and copy the generated key</li>
                </ol>
                <div class="warning">
                  <strong>Note:</strong> API keys have full workspace access regardless of user permissions.
                  Store securely and never commit to version control.
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="step" id="step-2">
          <div class="step-number">2</div>
          <div class="step-content">
            <h3>Choose Your Setup Method</h3>

            <div class="setup-options">
              <button class="setup-option active" data-method="hosted">
                <div class="option-header">
                  <h4>Cloud</h4>
                </div>
                <p>Connect directly to Nestr's MCP server. No installation required. Just add your API key.</p>
                <ul class="option-pros">
                  <li>Zero setup, works immediately</li>
                  <li>Always up to date</li>
                  <li>No Node.js required</li>
                </ul>
              </button>

              <button class="setup-option" data-method="local">
                <div class="option-header">
                  <h4>Local</h4>
                </div>
                <p>Run the MCP server on your machine via npm. Best for developers or offline use.</p>
                <ul class="option-pros">
                  <li>Works offline</li>
                  <li>Full control over the server</li>
                  <li>Can pin to specific versions</li>
                </ul>
              </button>
            </div>

          </div>
        </div>

        <div class="step" id="step-3">
          <div class="step-number">3</div>
          <div class="step-content">
            <h3>Configure Your AI Client</h3>

            <div class="tabs">
              <button class="tab active" data-tab="claude-desktop">Claude</button>
              <button class="tab" data-tab="chatgpt">ChatGPT</button>
              <button class="tab" data-tab="copilot-studio">Copilot Studio</button>
              <button class="tab" data-tab="claude-code">Claude Code</button>
              <button class="tab" data-tab="gemini">Gemini CLI</button>
              <button class="tab" data-tab="cursor">Cursor</button>
              <button class="tab" data-tab="copilot">VS Code</button>
              <button class="tab" data-tab="manual">Other / Manual</button>
            </div>

            <div class="tab-content active" id="claude-desktop">
              <p class="tip" style="margin-bottom: 16px;">Works for both <strong>claude.ai</strong> (web) and <strong>Claude Desktop</strong> app. Connectors sync across both.</p>

              <div class="config-block hosted oauth active">
                <div class="quickstart-box">
                  <h4>Quickstart (Recommended)</h4>
                  <p><strong>Step 1:</strong> In Claude, go to <strong>Settings &rarr; Connectors &rarr; Add custom connector</strong></p>
                  <p><strong>Step 2:</strong> Fill in the following:</p>
                  <table class="field-table">
                    <tr><td><strong>Name</strong></td><td><code>Nestr</code></td></tr>
                    <tr><td><strong>Remote MCP URL</strong></td><td><code>https://mcp.nestr.io/mcp</code></td></tr>
                  </table>
                  <p><strong>Step 3:</strong> Click "Add" and then "Authenticate" to log in with your Nestr account.</p>
                  <p class="quickstart-note">That's it! Claude will handle the OAuth flow automatically.</p>
                </div>
              </div>

              <div class="config-block hosted apikey">
                <p>Go to <strong>Settings &rarr; Connectors &rarr; Add custom connector</strong> and fill in:</p>
                <table class="field-table">
                  <tr><td><strong>Name</strong></td><td><code>Nestr</code></td></tr>
                  <tr><td><strong>Remote MCP URL</strong></td><td><code>https://mcp.nestr.io/mcp</code></td></tr>
                  <tr><td><strong>Headers</strong></td><td><code>X-Nestr-API-Key: your-api-key-here</code></td></tr>
                </table>
              </div>

              <div class="config-block local oauth">
                <p class="warning" style="margin-bottom: 12px;">Local setup only works with the <strong>Claude Desktop app</strong>, not claude.ai web.</p>
                <p>Edit your Claude Desktop config file:</p>
                <ul>
                  <li><strong>macOS:</strong> <code>~/Library/Application Support/Claude/claude_desktop_config.json</code></li>
                  <li><strong>Windows:</strong> <code>%APPDATA%\Claude\claude_desktop_config.json</code></li>
                </ul>
                <pre><code>{
  "mcpServers": {
    "nestr": {
      "command": "npx",
      "args": ["-y", "@nestr/mcp"],
      "env": {
        "NESTR_OAUTH_TOKEN": "your-oauth-token-here"
      }
    }
  }
}</code></pre>
                <p>Restart Claude Desktop after saving.</p>
              </div>

              <div class="config-block local apikey">
                <p class="warning" style="margin-bottom: 12px;">Local setup only works with the <strong>Claude Desktop app</strong>, not claude.ai web.</p>
                <p>Edit your Claude Desktop config file:</p>
                <ul>
                  <li><strong>macOS:</strong> <code>~/Library/Application Support/Claude/claude_desktop_config.json</code></li>
                  <li><strong>Windows:</strong> <code>%APPDATA%\Claude\claude_desktop_config.json</code></li>
                </ul>
                <pre><code>{
  "mcpServers": {
    "nestr": {
      "command": "npx",
      "args": ["-y", "@nestr/mcp"],
      "env": {
        "NESTR_API_KEY": "your-api-key-here"
      }
    }
  }
}</code></pre>
                <p>Restart Claude Desktop after saving.</p>
              </div>
            </div>

            <div class="tab-content" id="claude-code">
              <div class="config-block hosted oauth active">
                <div class="quickstart-box">
                  <h4>Quickstart (Recommended)</h4>
                  <p><strong>Step 1:</strong> Add the Nestr MCP server:</p>
                  <pre><code>claude mcp add nestr --transport http https://mcp.nestr.io/mcp</code></pre>
                  <p><strong>Step 2:</strong> In Claude Code, run <code>/mcp</code> and click "Authenticate" next to Nestr. This will open your browser to log in with Nestr.</p>
                  <p class="quickstart-note">That's it! Once authenticated, Claude Code can access your Nestr workspace.</p>
                </div>
                <p>Or, if you already have a token, add it manually:</p>
                <pre><code>claude mcp add nestr --transport http https://mcp.nestr.io/mcp \
  --header "Authorization: Bearer your-oauth-token-here"</code></pre>
              </div>

              <div class="config-block hosted apikey">
                <p>Run this command in your terminal:</p>
                <pre><code>claude mcp add nestr --transport http https://mcp.nestr.io/mcp \
  --header "X-Nestr-API-Key: your-api-key-here"</code></pre>
              </div>

              <div class="config-block local oauth">
                <p>Run this command in your terminal:</p>
                <pre><code>claude mcp add nestr -- npx -y @nestr/mcp \
  --env NESTR_OAUTH_TOKEN=your-oauth-token-here</code></pre>
              </div>

              <div class="config-block local apikey">
                <p>Run this command in your terminal:</p>
                <pre><code>claude mcp add nestr -- npx -y @nestr/mcp \
  --env NESTR_API_KEY=your-api-key-here</code></pre>
              </div>

              <p>Run <code>/mcp</code> anytime to check connection status or re-authenticate.</p>
            </div>

            <div class="tab-content" id="cursor">
              <p>In Cursor, go to <strong>Settings &rarr; Cursor Settings &rarr; MCP Servers</strong>, or edit the config file:</p>
              <ul>
                <li><strong>macOS/Linux:</strong> <code>~/.cursor/mcp.json</code></li>
                <li><strong>Windows:</strong> <code>%USERPROFILE%\.cursor\mcp.json</code></li>
              </ul>

              <div class="config-block hosted oauth active">
                <div class="token-section" id="cursor-hosted-oauth-token">
                  <a href="/oauth/authorize" class="btn primary token-btn" onclick="saveStateBeforeOAuth('cursor')">Get Your Token</a>
                  <span class="token-hint">Login with Nestr to get your OAuth token</span>
                </div>
                <div class="token-success" id="cursor-hosted-oauth-success" style="display: none;">
                  <div class="token-success-header">Authentication Successful</div>
                  <p>Copy this token into the configuration below:</p>
                  <div class="token-display">
                    <input type="text" class="token-value" readonly>
                    <button class="btn primary" onclick="copyToken(this)">Copy</button>
                  </div>
                  <p class="copy-feedback" style="display: none;">Copied to clipboard!</p>
                </div>
                <p>Add the following configuration:</p>
                <pre><code>{
  "mcpServers": {
    "nestr": {
      "url": "https://mcp.nestr.io/mcp",
      "headers": {
        "Authorization": "Bearer <span class="token-placeholder">your-oauth-token-here</span>"
      }
    }
  }
}</code></pre>
              </div>

              <div class="config-block hosted apikey">
                <p>Add the following configuration:</p>
                <pre><code>{
  "mcpServers": {
    "nestr": {
      "url": "https://mcp.nestr.io/mcp",
      "headers": {
        "X-Nestr-API-Key": "your-api-key-here"
      }
    }
  }
}</code></pre>
              </div>

              <div class="config-block local oauth">
                <div class="token-section" id="cursor-local-oauth-token">
                  <a href="/oauth/authorize" class="btn primary token-btn" onclick="saveStateBeforeOAuth('cursor')">Get Your Token</a>
                  <span class="token-hint">Login with Nestr to get your OAuth token</span>
                </div>
                <div class="token-success" id="cursor-local-oauth-success" style="display: none;">
                  <div class="token-success-header">Authentication Successful</div>
                  <p>Copy this token into the configuration below:</p>
                  <div class="token-display">
                    <input type="text" class="token-value" readonly>
                    <button class="btn primary" onclick="copyToken(this)">Copy</button>
                  </div>
                  <p class="copy-feedback" style="display: none;">Copied to clipboard!</p>
                </div>
                <p>Add the following configuration:</p>
                <pre><code>{
  "mcpServers": {
    "nestr": {
      "command": "npx",
      "args": ["-y", "@nestr/mcp"],
      "env": {
        "NESTR_OAUTH_TOKEN": "<span class="token-placeholder">your-oauth-token-here</span>"
      }
    }
  }
}</code></pre>
              </div>

              <div class="config-block local apikey">
                <p>Add the following configuration:</p>
                <pre><code>{
  "mcpServers": {
    "nestr": {
      "command": "npx",
      "args": ["-y", "@nestr/mcp"],
      "env": {
        "NESTR_API_KEY": "your-api-key-here"
      }
    }
  }
}</code></pre>
              </div>
              <p>Restart Cursor after saving.</p>
            </div>

            <div class="tab-content" id="chatgpt">
              <p class="tip" style="margin-bottom: 16px;">Works for <strong>chatgpt.com</strong> (web), <strong>desktop app</strong>, and <strong>mobile</strong>. Apps sync across all.</p>
              <div class="warning" style="margin-bottom: 1rem;">
                <strong>Note:</strong> Requires Developer Mode (Pro, Team, Enterprise, Edu plans). Not available in EEA, Switzerland, or UK.
              </div>

              <div class="config-block hosted oauth active">
                <div class="quickstart-box">
                  <h4>Quickstart</h4>
                  <p><strong>Step 1:</strong> In ChatGPT, go to <strong>Settings &rarr; Apps &rarr; Advanced settings</strong> and enable <strong>Developer Mode</strong></p>
                  <p><strong>Step 2:</strong> Click <strong>Add more</strong>, then <strong>Create</strong> to add a new app:</p>
                  <table class="field-table">
                    <tr><td><strong>Name</strong></td><td><code>Nestr</code></td></tr>
                    <tr><td><strong>Server URL</strong></td><td><code>https://mcp.nestr.io/mcp</code></td></tr>
                  </table>
                  <p><strong>Step 3:</strong> Check "I trust this provider" and click <strong>Create</strong></p>
                  <p><strong>Step 4:</strong> In each chat, click <strong>+ &rarr; More &rarr; Developer Mode</strong> and enable Nestr</p>
                  <p class="quickstart-note">ChatGPT will prompt you to authenticate with Nestr when the app is first used.</p>
                </div>
              </div>

              <div class="config-block hosted apikey">
                <p><strong>Step 1:</strong> In ChatGPT, go to <strong>Settings &rarr; Apps &rarr; Advanced settings</strong> and enable <strong>Developer Mode</strong></p>
                <p><strong>Step 2:</strong> Click <strong>Add more</strong>, then <strong>Create</strong> to add a new app:</p>
                <table class="field-table">
                  <tr><td><strong>Name</strong></td><td><code>Nestr</code></td></tr>
                  <tr><td><strong>Server URL</strong></td><td><code>https://mcp.nestr.io/mcp</code></td></tr>
                  <tr><td><strong>Authentication</strong></td><td>Add header <code>X-Nestr-API-Key: your-api-key-here</code></td></tr>
                </table>
                <p><strong>Step 3:</strong> Check "I trust this provider" and click <strong>Create</strong></p>
                <p><strong>Step 4:</strong> In each chat, click <strong>+ &rarr; More &rarr; Developer Mode</strong> and enable Nestr</p>
              </div>

              <div class="config-block local oauth">
                <p class="warning">ChatGPT only supports remote MCP servers. Please use the <strong>Cloud</strong> setup method for ChatGPT.</p>
              </div>

              <div class="config-block local apikey">
                <p class="warning">ChatGPT only supports remote MCP servers. Please use the <strong>Cloud</strong> setup method for ChatGPT.</p>
              </div>
            </div>

            <div class="tab-content" id="copilot-studio">
              <p class="tip" style="margin-bottom: 16px;">Works with <strong>Microsoft Copilot Studio</strong> agents and <strong>Microsoft 365 Copilot</strong> declarative agents.</p>

              <div class="config-block hosted oauth active">
                <div class="quickstart-box">
                  <h4>Quickstart</h4>
                  <p><strong>Step 1:</strong> In Copilot Studio, open your agent and go to <strong>Tools &rarr; Add Tool &rarr; New Tool &rarr; MCP</strong></p>
                  <p><strong>Step 2:</strong> Enter the server URL:</p>
                  <table class="field-table">
                    <tr><td><strong>URL</strong></td><td><code>https://mcp.nestr.io/mcp</code></td></tr>
                  </table>
                  <p><strong>Step 3:</strong> Save and publish your agent</p>
                  <p class="quickstart-note">Copilot Studio will prompt you to authenticate with Nestr when the tools are first used.</p>
                </div>
              </div>

              <div class="config-block hosted apikey">
                <p><strong>Step 1:</strong> In Copilot Studio, open your agent and go to <strong>Tools &rarr; Add Tool &rarr; New Tool &rarr; MCP</strong></p>
                <p><strong>Step 2:</strong> Enter the server URL and authentication:</p>
                <table class="field-table">
                  <tr><td><strong>URL</strong></td><td><code>https://mcp.nestr.io/mcp</code></td></tr>
                  <tr><td><strong>Header</strong></td><td><code>X-Nestr-API-Key: your-api-key-here</code></td></tr>
                </table>
                <p><strong>Step 3:</strong> Save and publish your agent</p>
              </div>

              <div class="config-block local oauth">
                <p class="warning">Copilot Studio only supports remote MCP servers. Please use the <strong>Cloud</strong> setup method.</p>
              </div>

              <div class="config-block local apikey">
                <p class="warning">Copilot Studio only supports remote MCP servers. Please use the <strong>Cloud</strong> setup method.</p>
              </div>
            </div>

            <div class="tab-content" id="gemini">
              <p>Configure the Nestr MCP server in your Gemini CLI settings file:</p>
              <ul>
                <li><strong>macOS/Linux:</strong> <code>~/.gemini/settings.json</code></li>
                <li><strong>Windows:</strong> <code>%USERPROFILE%\.gemini\settings.json</code></li>
              </ul>

              <div class="config-block hosted oauth active">
                <div class="token-section" id="gemini-hosted-oauth-token">
                  <a href="/oauth/authorize" class="btn primary token-btn" onclick="saveStateBeforeOAuth('gemini')">Get Your Token</a>
                  <span class="token-hint">Login with Nestr to get your OAuth token</span>
                </div>
                <div class="token-success" id="gemini-hosted-oauth-success" style="display: none;">
                  <div class="token-success-header">Authentication Successful</div>
                  <p>Copy this token into the configuration below:</p>
                  <div class="token-display">
                    <input type="text" class="token-value" readonly>
                    <button class="btn primary" onclick="copyToken(this)">Copy</button>
                  </div>
                  <p class="copy-feedback" style="display: none;">Copied to clipboard!</p>
                </div>
                <p>Add the following configuration:</p>
                <pre><code>{
  "mcpServers": {
    "nestr": {
      "httpUrl": "https://mcp.nestr.io/mcp",
      "headers": {
        "Authorization": "Bearer <span class="token-placeholder">your-oauth-token-here</span>"
      }
    }
  }
}</code></pre>
              </div>

              <div class="config-block hosted apikey">
                <p>Add the following configuration:</p>
                <pre><code>{
  "mcpServers": {
    "nestr": {
      "httpUrl": "https://mcp.nestr.io/mcp",
      "headers": {
        "X-Nestr-API-Key": "your-api-key-here"
      }
    }
  }
}</code></pre>
              </div>

              <div class="config-block local oauth">
                <div class="token-section" id="gemini-local-oauth-token">
                  <a href="/oauth/authorize" class="btn primary token-btn" onclick="saveStateBeforeOAuth('gemini')">Get Your Token</a>
                  <span class="token-hint">Login with Nestr to get your OAuth token</span>
                </div>
                <div class="token-success" id="gemini-local-oauth-success" style="display: none;">
                  <div class="token-success-header">Authentication Successful</div>
                  <p>Copy this token into the configuration below:</p>
                  <div class="token-display">
                    <input type="text" class="token-value" readonly>
                    <button class="btn primary" onclick="copyToken(this)">Copy</button>
                  </div>
                  <p class="copy-feedback" style="display: none;">Copied to clipboard!</p>
                </div>
                <p>Add the following configuration:</p>
                <pre><code>{
  "mcpServers": {
    "nestr": {
      "command": "npx",
      "args": ["-y", "@nestr/mcp"],
      "env": {
        "NESTR_OAUTH_TOKEN": "<span class="token-placeholder">your-oauth-token-here</span>"
      }
    }
  }
}</code></pre>
              </div>

              <div class="config-block local apikey">
                <p>Add the following configuration:</p>
                <pre><code>{
  "mcpServers": {
    "nestr": {
      "command": "npx",
      "args": ["-y", "@nestr/mcp"],
      "env": {
        "NESTR_API_KEY": "your-api-key-here"
      }
    }
  }
}</code></pre>
              </div>
              <p>Restart Gemini CLI after saving.</p>
            </div>

            <div class="tab-content" id="copilot">
              <p>Configure VS Code to use the Nestr MCP server with GitHub Copilot Chat.</p>

              <div class="config-block hosted oauth active">
                <div class="quickstart-box">
                  <h4>One-Click Install</h4>
                  <p>Click the button below to add Nestr to VS Code:</p>
                  <a href="#" class="btn primary" id="vscode-install-btn" onclick="installVSCodeMCP(event)">Add to VS Code</a>
                  <p class="quickstart-note" style="margin-top: 0.5rem;">After installation, authenticate via the GitHub Copilot Chat panel.</p>
                  <p class="fallback-note">Button not working? <a href="#" onclick="showManualConfig(event, 'copilot-hosted-oauth')">Show manual setup</a></p>
                </div>
                <div class="manual-fallback" id="copilot-hosted-oauth-fallback" style="display: none;">
                  <p><strong>Manual setup:</strong> Edit your VS Code settings (<code>.vscode/mcp.json</code> or user settings):</p>
                  <div class="token-section" id="copilot-hosted-oauth-token">
                    <a href="/oauth/authorize" class="btn primary token-btn" onclick="saveStateBeforeOAuth('copilot')">Get Your Token</a>
                    <span class="token-hint">Login with Nestr to get your OAuth token</span>
                  </div>
                  <div class="token-success" id="copilot-hosted-oauth-success" style="display: none;">
                    <div class="token-success-header">Authentication Successful</div>
                    <p>Copy this token into the configuration below:</p>
                    <div class="token-display">
                      <input type="text" class="token-value" readonly>
                      <button class="btn primary" onclick="copyToken(this)">Copy</button>
                    </div>
                    <p class="copy-feedback" style="display: none;">Copied to clipboard!</p>
                  </div>
                  <pre><code>{
  "servers": {
    "nestr": {
      "url": "https://mcp.nestr.io/mcp",
      "headers": {
        "Authorization": "Bearer <span class="token-placeholder">your-oauth-token-here</span>"
      }
    }
  }
}</code></pre>
                </div>
              </div>

              <div class="config-block hosted apikey">
                <div class="quickstart-box">
                  <h4>One-Click Install</h4>
                  <p>Click the button below to add Nestr to VS Code (you'll need to add your API key after):</p>
                  <a href="#" class="btn primary" id="vscode-install-btn-apikey" onclick="installVSCodeMCP(event)">Add to VS Code</a>
                  <p class="fallback-note">Button not working? <a href="#" onclick="showManualConfig(event, 'copilot-hosted-apikey')">Show manual setup</a></p>
                </div>
                <div class="manual-fallback" id="copilot-hosted-apikey-fallback" style="display: none;">
                  <p><strong>Manual setup:</strong> Edit your VS Code settings (<code>.vscode/mcp.json</code> or user settings):</p>
                  <pre><code>{
  "servers": {
    "nestr": {
      "url": "https://mcp.nestr.io/mcp",
      "headers": {
        "X-Nestr-API-Key": "your-api-key-here"
      }
    }
  }
}</code></pre>
                </div>
              </div>

              <div class="config-block local oauth">
                <div class="token-section" id="copilot-local-oauth-token">
                  <a href="/oauth/authorize" class="btn primary token-btn" onclick="saveStateBeforeOAuth('copilot')">Get Your Token</a>
                  <span class="token-hint">Login with Nestr to get your OAuth token</span>
                </div>
                <div class="token-success" id="copilot-local-oauth-success" style="display: none;">
                  <div class="token-success-header">Authentication Successful</div>
                  <p>Copy this token into the configuration below:</p>
                  <div class="token-display">
                    <input type="text" class="token-value" readonly>
                    <button class="btn primary" onclick="copyToken(this)">Copy</button>
                  </div>
                  <p class="copy-feedback" style="display: none;">Copied to clipboard!</p>
                </div>
                <p>Edit your VS Code settings (<code>.vscode/mcp.json</code> or user settings):</p>
                <pre><code>{
  "servers": {
    "nestr": {
      "command": "npx",
      "args": ["-y", "@nestr/mcp"],
      "env": {
        "NESTR_OAUTH_TOKEN": "<span class="token-placeholder">your-oauth-token-here</span>"
      }
    }
  }
}</code></pre>
              </div>

              <div class="config-block local apikey">
                <p>Edit your VS Code settings (<code>.vscode/mcp.json</code> or user settings):</p>
                <pre><code>{
  "servers": {
    "nestr": {
      "command": "npx",
      "args": ["-y", "@nestr/mcp"],
      "env": {
        "NESTR_API_KEY": "your-api-key-here"
      }
    }
  }
}</code></pre>
              </div>
              <p>Reload VS Code window after saving (<code>Cmd/Ctrl + Shift + P</code> &rarr; "Developer: Reload Window").</p>
            </div>

            <div class="tab-content" id="manual">
              <p>For other MCP clients, use these configuration details:</p>

              <div class="config-block hosted oauth active">
                <div class="token-section" id="manual-hosted-oauth-token">
                  <a href="/oauth/authorize" class="btn primary token-btn" onclick="saveStateBeforeOAuth('manual')">Get Your Token</a>
                  <span class="token-hint">Login with Nestr to get your OAuth token</span>
                </div>
                <div class="token-success" id="manual-hosted-oauth-success" style="display: none;">
                  <div class="token-success-header">Authentication Successful</div>
                  <p>Copy this token into the configuration below:</p>
                  <div class="token-display">
                    <input type="text" class="token-value" readonly>
                    <button class="btn primary" onclick="copyToken(this)">Copy</button>
                  </div>
                  <p class="copy-feedback" style="display: none;">Copied to clipboard!</p>
                </div>
                <table class="field-table">
                  <tr><td><strong>MCP Server URL</strong></td><td><code>https://mcp.nestr.io/mcp</code></td></tr>
                  <tr><td><strong>Transport</strong></td><td>HTTP (Streamable)</td></tr>
                  <tr><td><strong>Authorization Header</strong></td><td><code>Bearer <span class="token-placeholder">your-oauth-token-here</span></code></td></tr>
                </table>
                <p>Or as JSON configuration:</p>
                <pre><code>{
  "mcpServers": {
    "nestr": {
      "url": "https://mcp.nestr.io/mcp",
      "headers": {
        "Authorization": "Bearer <span class="token-placeholder">your-oauth-token-here</span>"
      }
    }
  }
}</code></pre>
              </div>

              <div class="config-block hosted apikey">
                <table class="field-table">
                  <tr><td><strong>MCP Server URL</strong></td><td><code>https://mcp.nestr.io/mcp</code></td></tr>
                  <tr><td><strong>Transport</strong></td><td>HTTP (Streamable)</td></tr>
                  <tr><td><strong>Header</strong></td><td><code>X-Nestr-API-Key: your-api-key-here</code></td></tr>
                </table>
                <p>Or as JSON configuration:</p>
                <pre><code>{
  "mcpServers": {
    "nestr": {
      "url": "https://mcp.nestr.io/mcp",
      "headers": {
        "X-Nestr-API-Key": "your-api-key-here"
      }
    }
  }
}</code></pre>
              </div>

              <div class="config-block local oauth">
                <div class="token-section" id="manual-local-oauth-token">
                  <a href="/oauth/authorize" class="btn primary token-btn" onclick="saveStateBeforeOAuth('manual')">Get Your Token</a>
                  <span class="token-hint">Login with Nestr to get your OAuth token</span>
                </div>
                <div class="token-success" id="manual-local-oauth-success" style="display: none;">
                  <div class="token-success-header">Authentication Successful</div>
                  <p>Copy this token into the configuration below:</p>
                  <div class="token-display">
                    <input type="text" class="token-value" readonly>
                    <button class="btn primary" onclick="copyToken(this)">Copy</button>
                  </div>
                  <p class="copy-feedback" style="display: none;">Copied to clipboard!</p>
                </div>
                <table class="field-table">
                  <tr><td><strong>Command</strong></td><td><code>npx -y @nestr/mcp</code></td></tr>
                  <tr><td><strong>Transport</strong></td><td>stdio</td></tr>
                  <tr><td><strong>Environment</strong></td><td><code>NESTR_OAUTH_TOKEN=<span class="token-placeholder">your-oauth-token-here</span></code></td></tr>
                </table>
                <p>Or as JSON configuration:</p>
                <pre><code>{
  "mcpServers": {
    "nestr": {
      "command": "npx",
      "args": ["-y", "@nestr/mcp"],
      "env": {
        "NESTR_OAUTH_TOKEN": "<span class="token-placeholder">your-oauth-token-here</span>"
      }
    }
  }
}</code></pre>
              </div>

              <div class="config-block local apikey">
                <table class="field-table">
                  <tr><td><strong>Command</strong></td><td><code>npx -y @nestr/mcp</code></td></tr>
                  <tr><td><strong>Transport</strong></td><td>stdio</td></tr>
                  <tr><td><strong>Environment</strong></td><td><code>NESTR_API_KEY=your-api-key-here</code></td></tr>
                </table>
                <p>Or as JSON configuration:</p>
                <pre><code>{
  "mcpServers": {
    "nestr": {
      "command": "npx",
      "args": ["-y", "@nestr/mcp"],
      "env": {
        "NESTR_API_KEY": "your-api-key-here"
      }
    }
  }
}</code></pre>
              </div>
            </div>

          </div>
        </div>

        <div class="step" id="step-4">
          <div class="step-number">4</div>
          <div class="step-content">
            <h3>Start Using It</h3>
            <p>Once configured, the Nestr tools are automatically available to your AI assistant. No special syntax or @ mentions needed &mdash; just ask naturally:</p>
            <ul class="example-queries">
              <li>"I have a tension about our hiring process &mdash; can you capture it?"</li>
              <li>"What circles do we have and who are the Lead Links?"</li>
              <li>"Show me all projects in the Product circle"</li>
              <li>"Who has the accountability for customer onboarding?"</li>
              <li>"Help me prepare for tomorrow's governance meeting"</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <section id="examples" class="examples">
      <div class="container">
        <h2>Example Conversations</h2>

        <div class="example">
          <div class="user-message">
            <strong>You:</strong> I have a tension about our customer onboarding process being too slow. Can you capture it?
          </div>
          <div class="ai-message">
            <strong>Claude:</strong> I've captured your tension in your inbox:
            <br><br>
            <strong>"Customer onboarding process is too slow"</strong>
            <br><br>
            This looks like it might relate to the <strong>Customer Success</strong> circle. Would you like me to add more context, or shall I check which role has the accountability for onboarding?
          </div>
        </div>

        <div class="example">
          <div class="user-message">
            <strong>You:</strong> What projects does the Marketing circle have for this quarter?
          </div>
          <div class="ai-message">
            <strong>Claude:</strong> I'll check the Marketing circle's projects.
            <br><br>
            Found 4 projects in <strong>Marketing</strong>:
            <ul>
              <li><strong>Website Redesign</strong> - Status: Current, Due: Jan 30</li>
              <li><strong>Q1 Campaign</strong> - Status: Current, Due: Feb 15</li>
              <li><strong>Brand Guidelines Update</strong> - Status: Waiting (blocked on design review)</li>
              <li><strong>Social Media Strategy</strong> - Status: Future</li>
            </ul>
          </div>
        </div>

        <div class="example">
          <div class="user-message">
            <strong>You:</strong> Who has the accountability for API integrations?
          </div>
          <div class="ai-message">
            <strong>Claude:</strong> Based on your governance structure, the <strong>Developer</strong> role in the <strong>Tech</strong> circle holds this accountability.
            <br><br>
            <strong>Role:</strong> Developer
            <br>
            <strong>Circle:</strong> Tech
            <br>
            <strong>Filled by:</strong> Jane Smith
            <br>
            <strong>Relevant accountabilities:</strong>
            <ul>
              <li>Building and maintaining API integrations</li>
              <li>Documenting technical implementations</li>
            </ul>
          </div>
        </div>

        <div class="example">
          <div class="user-message">
            <strong>You:</strong> Help me prepare for tomorrow's tactical meeting in the Product circle
          </div>
          <div class="ai-message">
            <strong>Claude:</strong> Here's a summary for your <strong>Product</strong> circle tactical meeting:
            <br><br>
            <strong>Checklist items to review:</strong> 3 metrics due for update
            <br>
            <strong>Projects needing attention:</strong>
            <ul>
              <li><strong>Mobile App v2</strong> - No updates in 14 days</li>
              <li><strong>User Research</strong> - Status changed to "Waiting"</li>
            </ul>
            <strong>Open tensions:</strong> 2 tensions in the backlog
            <br><br>
            Would you like me to show the details of any of these?
          </div>
        </div>

        <div class="example">
          <div class="user-message">
            <strong>You:</strong> I want to propose adding a new accountability to the Marketing Lead role for next governance. Can you prepare that tension for me?
          </div>
          <div class="ai-message">
            <strong>Claude:</strong> I've created a governance tension for your next meeting:
            <br><br>
            <strong>Tension:</strong> "Add accountability for brand consistency reviews to Marketing Lead"
            <br>
            <strong>Circle:</strong> Marketing
            <br>
            <strong>Type:</strong> Governance proposal
            <br><br>
            <strong>Draft proposal:</strong>
            <ul>
              <li>Add to <strong>Marketing Lead</strong> role:</li>
              <li>Accountability: "Reviewing external communications for brand consistency"</li>
            </ul>
            Would you like me to add any context or refine the proposal wording?
          </div>
        </div>

        <div class="example">
          <div class="user-message">
            <strong>You:</strong> What should I focus on this week given our circle strategy?
          </div>
          <div class="ai-message">
            <strong>Claude:</strong> Based on the <strong>Product</strong> circle strategy of <em>"Improve user retention through better onboarding"</em>, here are your priority projects:
            <br><br>
            <strong>Your roles and aligned projects:</strong>
            <ul>
              <li><strong>Product Designer:</strong> "Onboarding flow redesign" - Current, Due: Jan 25</li>
              <li><strong>Product Designer:</strong> "First-week email sequence" - Current, Due: Jan 28</li>
              <li><strong>UX Researcher:</strong> "New user drop-off analysis" - Waiting on data</li>
            </ul>
            The onboarding redesign is most urgent and directly supports the strategy. Want me to show the details or related tensions?
          </div>
        </div>
      </div>
    </section>

    <section class="tools">
      <div class="container">
        <h2>Available Tools</h2>
        <div class="tool-grid">
          <div class="tool">
            <code>nestr_list_workspaces</code>
            <p>List accessible workspaces</p>
          </div>
          <div class="tool">
            <code>nestr_search</code>
            <p>Search for tasks, projects, roles</p>
          </div>
          <div class="tool">
            <code>nestr_create_nest</code>
            <p>Create new tasks or projects</p>
          </div>
          <div class="tool">
            <code>nestr_update_nest</code>
            <p>Update nest properties</p>
          </div>
          <div class="tool">
            <code>nestr_list_circles</code>
            <p>List organizational circles</p>
          </div>
          <div class="tool">
            <code>nestr_get_circle_roles</code>
            <p>Get roles in a circle</p>
          </div>
          <div class="tool">
            <code>nestr_get_insights</code>
            <p>Get workspace metrics</p>
          </div>
          <div class="tool">
            <code>nestr_add_comment</code>
            <p>Add comments to nests</p>
          </div>
        </div>
        <p class="tool-note">
          <a href="https://github.com/nestr-dev/nestr-mcp#available-tools" target="_blank">
            View full tool documentation &rarr;
          </a>
        </p>
      </div>
    </section>

    <section class="support">
      <div class="container">
        <h2>Need Help?</h2>
        <div class="support-links">
          <a href="https://help.nestr.io" target="_blank" class="support-link">
            <div class="support-icon">&#128218;</div>
            <div>
              <strong>Documentation</strong>
              <p>Learn more about Nestr</p>
            </div>
          </a>
          <a href="https://github.com/nestr-dev/nestr-mcp/issues" target="_blank" class="support-link">
            <div class="support-icon">&#128030;</div>
            <div>
              <strong>Report Issues</strong>
              <p>Found a bug? Let us know</p>
            </div>
          </a>
          <a href="https://modelcontextprotocol.io" target="_blank" class="support-link">
            <div class="support-icon">&#128279;</div>
            <div>
              <strong>MCP Specification</strong>
              <p>Learn about the protocol</p>
            </div>
          </a>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">
      <p>&copy; 2026 Nestr. Built with the <a href="https://modelcontextprotocol.io" target="_blank">Model Context Protocol</a>.</p>
    </div>
  </footer>

  <script>
    // Track current selections
    let currentAuth = 'oauth';
    let currentSetup = 'hosted';

    // Function to update config blocks based on current selections
    function updateConfigBlocks() {
      document.querySelectorAll('.config-block').forEach(block => {
        block.classList.remove('active');
        if (block.classList.contains(currentSetup) && block.classList.contains(currentAuth)) {
          block.classList.add('active');
        }
      });
    }

    // Tab switching (Claude Desktop / Claude Code / Cursor)
    document.querySelectorAll('.tab').forEach(tab => {
      tab.addEventListener('click', () => {
        const tabId = tab.dataset.tab;

        // Update active tab
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        tab.classList.add('active');

        // Update active content
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
      });
    });

    // Auth method selection (oauth vs apikey)
    document.querySelectorAll('.auth-option').forEach(option => {
      option.addEventListener('click', () => {
        currentAuth = option.dataset.auth;

        // Update active option
        document.querySelectorAll('.auth-option').forEach(o => o.classList.remove('active'));
        option.classList.add('active');

        // Update auth details section
        document.querySelectorAll('.auth-detail').forEach(d => d.classList.remove('active'));
        document.getElementById('auth-detail-' + currentAuth).classList.add('active');

        // Update config blocks
        updateConfigBlocks();

        // Scroll to step 2
        setTimeout(() => {
          document.getElementById('step-2')?.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }, 150);
      });
    });

    // Setup method selection (hosted vs local)
    document.querySelectorAll('.setup-option').forEach(option => {
      option.addEventListener('click', () => {
        currentSetup = option.dataset.method;

        // Update active option
        document.querySelectorAll('.setup-option').forEach(o => o.classList.remove('active'));
        option.classList.add('active');

        // Update config blocks
        updateConfigBlocks();

        // Scroll to step 3
        setTimeout(() => {
          document.getElementById('step-3')?.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }, 150);
      });
    });

    // Save state before OAuth redirect
    function saveStateBeforeOAuth(tab) {
      localStorage.setItem('nestr-mcp-oauth-state', JSON.stringify({
        auth: currentAuth,
        setup: currentSetup,
        tab: tab
      }));
    }

    // Restore state from localStorage
    function restoreState() {
      const saved = localStorage.getItem('nestr-mcp-oauth-state');
      if (!saved) return null;

      try {
        const state = JSON.parse(saved);

        // Restore auth selection
        if (state.auth) {
          currentAuth = state.auth;
          document.querySelectorAll('.auth-option').forEach(o => {
            o.classList.toggle('active', o.dataset.auth === state.auth);
          });
          document.querySelectorAll('.auth-detail').forEach(d => d.classList.remove('active'));
          const authDetail = document.getElementById('auth-detail-' + state.auth);
          if (authDetail) authDetail.classList.add('active');
        }

        // Restore setup selection
        if (state.setup) {
          currentSetup = state.setup;
          document.querySelectorAll('.setup-option').forEach(o => {
            o.classList.toggle('active', o.dataset.method === state.setup);
          });
        }

        // Restore tab selection
        if (state.tab) {
          document.querySelectorAll('.tab').forEach(t => {
            t.classList.toggle('active', t.dataset.tab === state.tab);
          });
          document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
          const tabContent = document.getElementById(state.tab);
          if (tabContent) tabContent.classList.add('active');
        }

        // Update config blocks
        updateConfigBlocks();

        return state;
      } catch (e) {
        return null;
      }
    }

    // Show token inline in the current tab
    function showTokenInline(token, tab, setup) {
      // Build the ID for the token section to hide and success section to show
      const tokenSectionId = `${tab}-${setup}-oauth-token`;
      const successSectionId = `${tab}-${setup}-oauth-success`;

      const tokenSection = document.getElementById(tokenSectionId);
      const successSection = document.getElementById(successSectionId);

      if (tokenSection) tokenSection.style.display = 'none';
      if (successSection) {
        successSection.style.display = 'block';
        const input = successSection.querySelector('.token-value');
        if (input) input.value = token;
      }

      // Also update all token placeholders in the active config block
      document.querySelectorAll('.config-block.active .token-placeholder').forEach(el => {
        el.textContent = token;
        el.classList.add('token-filled');
      });

      // Scroll to setup section
      document.getElementById('setup')?.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    // Copy token from inline display
    function copyToken(button) {
      const container = button.closest('.token-success');
      const input = container.querySelector('.token-value');
      input.select();
      input.setSelectionRange(0, 99999);
      navigator.clipboard.writeText(input.value).then(() => {
        const feedback = container.querySelector('.copy-feedback');
        feedback.style.display = 'block';
        setTimeout(() => {
          feedback.style.display = 'none';
        }, 2000);
      });
    }

    // Check for token in URL hash on page load
    (function checkForToken() {
      const hash = window.location.hash;
      if (hash.startsWith('#token=')) {
        const token = decodeURIComponent(hash.substring(7));
        if (token) {
          // Restore previous state
          const state = restoreState();

          // Clear saved state
          localStorage.removeItem('nestr-mcp-oauth-state');

          // Clear hash from URL
          history.replaceState(null, '', window.location.pathname);

          // Show token inline (default to manual/hosted if no state)
          const tab = state?.tab || 'manual';
          const setup = state?.setup || 'hosted';

          // Small delay to ensure DOM is updated
          setTimeout(() => {
            showTokenInline(token, tab, setup);
          }, 100);
        }
      }
    })();

    // Install VS Code MCP server via deeplink
    function installVSCodeMCP(event) {
      event.preventDefault();

      // VS Code MCP server configuration
      const config = {
        name: 'nestr',
        url: 'https://mcp.nestr.io/mcp'
      };

      // Create the VS Code deeplink URL
      const vscodeLinkStable = `vscode:mcp/install?${encodeURIComponent(JSON.stringify(config))}`;
      const vscodeLinkInsiders = `vscode-insiders:mcp/install?${encodeURIComponent(JSON.stringify(config))}`;

      // Try to open VS Code
      window.location.href = vscodeLinkStable;

      // Show a message after a short delay in case VS Code didn't open
      setTimeout(() => {
        // Find the parent quickstart-box and show a helpful message
        const btn = event.target;
        const quickstartBox = btn.closest('.quickstart-box');
        if (quickstartBox) {
          let statusMsg = quickstartBox.querySelector('.vscode-status');
          if (!statusMsg) {
            statusMsg = document.createElement('p');
            statusMsg.className = 'vscode-status quickstart-note';
            statusMsg.innerHTML = 'If VS Code didn\'t open, try <a href="' + vscodeLinkInsiders + '">VS Code Insiders</a> or use the manual setup below.';
            quickstartBox.appendChild(statusMsg);
          }
        }
      }, 1500);
    }

    // Show manual configuration fallback
    function showManualConfig(event, id) {
      event.preventDefault();
      const fallback = document.getElementById(id + '-fallback');
      if (fallback) {
        fallback.style.display = 'block';
      }
    }

  </script>
</body>
</html>
